name: generate-palette
description: Generate accessible OKLCH color palette with feedback loop
version: "2.0"
category: design

entry_agent: color-palette-architect

inputs:
  required:
    - brand_personality
  optional:
    - industry
    - primary_color
    - color_temperature
    - palette_style
    - brand_guide_path

outputs:
  - color-palette.json
  - color-palette.md

agents:
  - color-palette-architect
  - color-theorist
  - color-psychologist
  - accessibility-checker

pipeline:
  type: sequential
  feedback_loop:
    enabled: true
    max_rounds: 3

phases:
  - name: context
    description: Gather brand and preference context
    agent: color-palette-architect

  - name: theory
    description: Generate OKLCH base palette using color theory
    agent: color-theorist
    quality_gate:
      metric: harmony_score
      minimum: 80
      feedback_enabled: true

  - name: psychology
    description: Apply color psychology for semantic mapping
    agent: color-psychologist
    quality_gate:
      metric: psychology_score
      minimum: 75
      feedback_enabled: true

  - name: accessibility
    description: Validate WCAG using Magic Number system
    agent: accessibility-checker
    quality_gate:
      metric: accessibility_score
      minimum: 90
      blocking: true
      feedback_enabled: true

  - name: compile
    description: Compile final outputs
    agent: color-palette-architect

quality_gates:
  harmony_score: 80
  psychology_score: 75
  accessibility_score: 90
