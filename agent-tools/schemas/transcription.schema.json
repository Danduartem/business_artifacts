{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agent-tools/schemas/transcription.schema.json",
  "title": "Transcription",
  "description": "Standard schema for video/audio transcription data",
  "type": "object",
  "required": ["text", "format"],
  "properties": {
    "text": {
      "type": "string",
      "description": "Full transcription text"
    },
    "format": {
      "type": "string",
      "enum": ["txt", "srt", "vtt", "json", "timestamps"],
      "description": "Transcription format"
    },
    "language": {
      "type": "string",
      "description": "Language code (e.g., en, pt, es)"
    },
    "duration": {
      "type": "number",
      "description": "Audio/video duration in seconds"
    },
    "segments": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Segment ID"
          },
          "start": {
            "type": "number",
            "description": "Start time in seconds"
          },
          "end": {
            "type": "number",
            "description": "End time in seconds"
          },
          "text": {
            "type": "string",
            "description": "Segment text"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence score"
          },
          "speaker": {
            "type": "string",
            "description": "Speaker identifier (if speaker diarization is available)"
          }
        },
        "required": ["start", "end", "text"]
      },
      "description": "Timestamped segments"
    },
    "words": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "word": {
            "type": "string"
          },
          "start": {
            "type": "number"
          },
          "end": {
            "type": "number"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        }
      },
      "description": "Word-level timestamps"
    },
    "speakers": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "totalTime": {
            "type": "number",
            "description": "Total speaking time in seconds"
          }
        }
      },
      "description": "Speaker information"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "model": {
          "type": "string",
          "description": "Transcription model used (e.g., whisper-1, medium)"
        },
        "engine": {
          "type": "string",
          "enum": ["openai", "whisper-cpp", "google", "aws", "azure"],
          "description": "Transcription engine"
        },
        "quality": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Audio quality"
        },
        "noiseLevel": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "Background noise level"
        }
      }
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Overall transcription confidence"
    },
    "sourceFile": {
      "type": "string",
      "description": "Path or URL to source audio/video file"
    },
    "sourceUrl": {
      "type": "string",
      "format": "uri",
      "description": "Original URL if downloaded"
    },
    "transcribedAt": {
      "type": "string",
      "format": "date-time",
      "description": "When the transcription was created"
    },
    "processingTime": {
      "type": "number",
      "description": "Time taken to transcribe (in seconds)"
    },
    "cost": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "currency": {
          "type": "string",
          "default": "USD"
        }
      },
      "description": "Cost of transcription (if applicable)"
    }
  }
}
